// handles most of the logic for fetching data from each API endpoint